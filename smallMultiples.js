// Generated by CoffeeScript 1.4.0
var count, smallMultiples;

count = 0;

smallMultiples = function(container, options) {
  var clip, d, fh, focus, fw, h, ml, mt, myCount, s, svg, td, ts, w, _ref, _ref1, _ref10, _ref11, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;
  w = options.width || 0;
  w += ((_ref = options.margin) != null ? _ref.left : void 0) || 0;
  w += ((_ref1 = options.margin) != null ? _ref1.right : void 0) || 0;
  h = options.height || 0;
  h += ((_ref2 = options.margin) != null ? _ref2.top : void 0) || 0;
  h += ((_ref3 = options.margin) != null ? _ref3.bottom : void 0) || 0;
  h += ((_ref4 = options.title) != null ? _ref4.size : void 0) || 0;
  h += ((_ref5 = options.title) != null ? _ref5.padding : void 0) || 0;
  ml = ((_ref6 = options.margin) != null ? _ref6.left : void 0) || 0;
  mt = ((_ref7 = options.margin) != null ? _ref7.top : void 0) || 0;
  mt += ((_ref8 = options.title) != null ? _ref8.height : void 0) || 0;
  mt += ((_ref9 = options.title) != null ? _ref9.padding : void 0) || 0;
  fw = options.width || 0;
  fh = options.height || 0;
  ts = ((_ref10 = options.title) != null ? _ref10.size : void 0) || 0;
  td = ((_ref11 = options.title) != null ? _ref11.data : void 0) || function() {
    return '';
  };
  d = options.data;
  s = container;
  myCount = count++;
  if (d != null) {
    s = s.selectAll("svg").data(d).enter();
  }
  svg = s.append("svg").attr("width", w).attr("height", h).append("g").attr("transform", "translate(" + ml + "," + mt + ")");
  if (td) {
    svg.append("title").text(td);
  }
  if (td) {
    svg.append("text").attr("x", fw / 2).attr("y", -4).style("font-size", ts).attr("text-anchor", "middle").text(td);
  }
  clip = svg.append("defs").append("clipPath").attr("id", function(d, i) {
    return "clip" + myCount + "-" + i;
  }).append("rect").attr("width", fw).attr("height", fh);
  return focus = svg.append("g").attr("clip-path", function(d, i) {
    return "url(#clip" + myCount + "-" + i + ")";
  });
};
